<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Idea Scoring System</title><link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí°</text></svg>"><script type="module" crossorigin>!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let e=[],t=[],n=null,o=1,s=[],r=0,i=[],a=!1;const c="http://18.101.24.106:8080";async function l(){const e=await async function(){try{const e=await fetch(`${c}/all-users-status`);return e.ok?await e.json():{users:[],all_voted:!1}}catch(e){return console.error("Error getting all users status:",e),{users:[],all_voted:!1}}}();await d(e)}async function d(e){document.querySelector(".game-container").style.display="none";const t=document.createElement("div");if(t.id="statusContainer",t.className="status-container",t.innerHTML=`\n        <div class="status-header">\n            <h2>üó≥Ô∏è Voting Complete</h2>\n            <p>You have finished your voting. Check the status below:</p>\n        </div>\n\n        \x3c!-- Tab Navigation --\x3e\n        <div class="tab-navigation">\n            <button class="tab-button active" onclick="switchTab('waiting-status')">Waiting Status</button>\n            <button class="tab-button" onclick="switchTab('my-scores')">My Scores</button>\n        </div>\n\n        \x3c!-- Tab Content --\x3e\n        <div id="waiting-status-tab" class="tab-content active">\n            <div class="users-status">\n                ${e.users.map(e=>`\n                    <div class="user-status-item ${e.has_voted?"completed":"waiting"}">\n                        <span class="status-icon">${e.has_voted?"‚úÖ":"‚è≥"}</span>\n                        <span class="user-email">${e.email}</span>\n                        <div class="status-text">${e.has_voted?"Completed":"Waiting"}</div>\n                    </div>\n                `).join("")}\n            </div>\n            <div class="status-summary">\n                <div class="summary-stat">\n                    <div class="stat-number">${e.voted_count}/${e.total_users}</div>\n                    <div class="stat-label">Users Completed</div>\n                </div>\n            </div>\n        </div>\n\n        <div id="my-scores-tab" class="tab-content">\n            <div class="my-scores-content">\n                <h3>Your Final Scores</h3>\n                <p>Here are the scores you assigned to each idea during your voting:</p>\n                <div class="personal-scores-list">\n                    ${i.map(e=>`\n                        <div class="personal-score-item">\n                            <div class="idea-info">\n                                <div class="idea-title">${e.title}</div>\n                                <div class="idea-description">${e.description}</div>\n                            </div>\n                            <div class="score-breakdown">\n                                <div class="score-detail">\n                                    <span class="score-label">Round 1:</span>\n                                    <span class="score-value">${e.round1Score||0}</span>\n                                </div>\n                                <div class="score-detail">\n                                    <span class="score-label">Round 2:</span>\n                                    <span class="score-value">${e.round2Score||0}</span>\n                                </div>\n                                <div class="score-detail">\n                                    <span class="score-label">Round 3:</span>\n                                    <span class="score-value">${e.round3Score||0}</span>\n                                </div>\n                                <div class="score-detail total">\n                                    <span class="score-label">Total:</span>\n                                    <span class="score-value">${e.finalScore||0}</span>\n                                </div>\n                            </div>\n                        </div>\n                    `).join("")}\n                </div>\n            </div>\n        </div>\n    `,document.querySelector(".header").insertAdjacentElement("afterend",t),e.all_voted)await async function(){try{const e=await async function(){try{const e=await fetch(`${c}/final-results`);if(e.ok)return await e.json();const t=await fetch(`${c}/results`);if(!t.ok)throw new Error("Failed to fetch results");return await t.json()}catch(e){throw console.error("Error fetching results:",e),e}}(),t=document.getElementById("statusContainer");t&&t.remove(),document.querySelector(".game-container").style.display="none";const n=document.createElement("div");n.id="finalResultsContainer",n.className="final-results-container",n.innerHTML=`\n            <div class="results-header">\n                <h2>üèÜ Final Results</h2>\n                <p>All users have completed voting. Here are the final normalized results:</p>\n            </div>\n            <div class="final-results-list">\n                ${Array.isArray(e)?e.map((e,t)=>`\n                    <div class="final-result-item">\n                        <div class="idea-content">\n                            <div class="idea-title">${e.title}</div>\n                            <div class="idea-description">${e.description}</div>\n                            <div class="final-score">Score: ${e.final_score.toFixed(3)}</div>\n                        </div>\n                    </div>\n                `).join(""):"<p>No final results available yet.</p>"}\n            </div>\n        `,document.querySelector(".header").insertAdjacentElement("afterend",n)}catch(e){console.error("Error loading final results:",e),alert("Error loading final results. Please try again.")}}();else{const e=document.createElement("button");e.className="control-button secondary",e.textContent="Refresh Status",e.onclick=()=>{document.getElementById("statusContainer").remove(),document.querySelector(".game-container").style.display="block",l()},t.querySelector(".status-summary").appendChild(e)}}function u(){const e=document.getElementById("ideasGrid");if(e.innerHTML="",a)return void function(){const e=document.getElementById("ideasGrid");e.innerHTML="",i.forEach((t,n)=>{const o=document.createElement("div");o.className="idea-card final-result";const s=t.finalScore>0?`<small>Round 1: ${t.round1Score||0} | Round 2: ${t.round2Score||0} | Round 3: ${t.round3Score||0}</small>`:"<small>Eliminated in Round 1</small>";o.innerHTML=`\n            <div class="idea-title">${t.title}</div>\n            <div class="idea-description">${t.description}</div>\n            <div class="final-score">\n                <strong>Final Score: ${t.finalScore||0}</strong>\n                <br>${s}\n            </div>\n        `,e.appendChild(o)})}();const t=s[r];[...t.ideas].sort((e,t)=>null===e.score&&null===t.score?0:null===e.score?1:null===t.score?-1:t.score-e.score).forEach(n=>{const o=document.createElement("div");o.className="idea-card "+(null!==n.score?"scored":""),o.setAttribute("data-idea-id",n.id);const i=[0,1,2].map(e=>{const t=n.score===e,o=function(e,t=null){const n=s[r],o=n.ideas,i=o.length,a=o.map(e=>e.score);if(!n.hasQuotas)return!0;if(0===e)return!0;let c=[...a];if(null!==t){const e=o.findIndex(e=>e.id===t);-1!==e&&(c[e]=null)}return 1===e?c.filter(e=>1===e).length<Math.ceil(.4*i):2===e&&c.filter(e=>2===e).length<Math.ceil(.2*i)}(e,n.id),i=null!==n.score&&n.score!==e,a=!t&&!i&&!o;return`\n                <button class="score-button ${t?"active":""} ${a?"disabled":""}"\n                        data-score="${e}"\n                        ${a?"disabled":""}\n                        onclick="assignScore(${n.id}, ${e})">\n                    ${e}\n                </button>\n            `}).join(""),a=t.previousScore>0?` (Previous: ${t.previousScore})`:"";o.innerHTML=`\n            <div class="idea-title">${n.title}</div>\n            <div class="idea-description">${n.description}</div>\n            <div class="score-controls">\n                ${i}\n            </div>\n            <div class="score-status">\n                ${null!==n.score?`Score: ${n.score}${a} (click to change or remove)`:`Select a score (0-2)${a}`}\n            </div>\n        `,e.appendChild(o)})}function m(){a=!0,u(),f()}function f(){if(a)return void function(){const e=i.filter(e=>e.finalScore>0).length;document.getElementById("totalIdeas").textContent=t.length,document.getElementById("progressFill").style.width="100%";const n=document.getElementById("submitVoteBtn");n.disabled=!0,n.textContent="Voting Complete",document.getElementById("roundInfo").style.display="none",document.querySelector(".header p").textContent=`Voting Complete - ${e} ideas survived 3 rounds of elimination`}();const e=s[r].ideas,n=e.filter(e=>null!==e.score).length,c=e.length;document.getElementById("totalIdeas").textContent=c;const l=n/c*100;document.getElementById("progressFill").style.width=`${l}%`;const d=document.getElementById("submitVoteBtn");d.disabled=n!==c,d.textContent=n===c?"Next Round":"Complete All Scores",function(){const e=s[r].ideas,t={0:0,1:0,2:0};e.forEach(e=>{null!==e.score&&t[e.score]++})}(),function(){const e=document.getElementById("roundInfo"),t=document.querySelector(".header p"),n=s[r];let i=`Round ${o}`;1===o?i+=": Score all ideas (2, 1, or 0)":2===o?i+=`: Ideas that were previously scored with ${n.round1Score}`:3===o&&(i+=`: Ideas with cumulative score ${n.cumulativeScore}`),e.textContent=i,e.style.display="block",t.textContent="Multi-round elimination voting in progress..."}()}document.getElementById("submitVoteBtn").addEventListener("click",function(){if(a)return;const e=s[r].ideas,t=e.filter(e=>null!==e.score).length,l=e.length;if(t===l){if(function(){const e=s[r].ideas;1===o?e.forEach(e=>{if(null!==e.score){e.cumulativeScore=e.score;let t=i.find(t=>t.id===e.id);t?(t.round1Score=e.score,t.finalScore=e.score):(t={id:e.id,title:e.title,description:e.description,round1Score:e.score,round2Score:0,round3Score:0,finalScore:e.score},i.push(t))}}):2===o?e.forEach(e=>{if(null!==e.score){const t=round1Results.find(t=>t.id===e.id),n=t?t.round1Score:0;e.cumulativeScore=n+e.score;const o=i.find(t=>t.id===e.id);o&&(o.round2Score=e.score,o.finalScore=n+e.score)}}):3===o&&e.forEach(e=>{if(null!==e.score){e.cumulativeScore=(e.cumulativeScore||0)+e.score;const t=i.find(t=>t.id===e.id);t&&(t.round3Score=e.score,t.finalScore=(t.finalScore||0)+e.score)}}),i.sort((e,t)=>t.finalScore-e.finalScore)}(),1===o){round1Results=e.map(e=>({...e,round1Score:e.score}));const t=function(){const e=[],t={2:[],1:[]};return round1Results.forEach(e=>{const n=e.round1Score;2!==n&&1!==n||t[n].push({...e,score:null,cumulativeScore:n})}),[2,1].forEach(n=>{t[n].length>0&&e.push({round:2,ideas:t[n],groupType:`round2_score_${n}`,hasQuotas:!1,round1Score:n})}),e}();if(!(t.length>0))return void m();s=t,o=2,r=0}else if(2===o)if(r<s.length-1)r++;else{s.forEach(e=>{e.ideas.forEach(e=>{if(void 0!==e.cumulativeScore){const t=round1Results.find(t=>t.id===e.id);t&&(t.cumulativeScore=e.cumulativeScore,t.round2Score=e.cumulativeScore-t.round1Score)}})});const e=function(){const e=[],t=[];s.forEach(e=>{e.ideas.forEach(e=>{void 0!==e.cumulativeScore&&t.push(e)})});const n={};return t.forEach(e=>{const t=e.cumulativeScore;t>=3&&(n[t]||(n[t]=[]),n[t].push({...e,score:null}))}),Object.keys(n).map(e=>parseInt(e)).sort((e,t)=>t-e).forEach(t=>{n[t].length>0&&e.push({round:3,ideas:n[t],groupType:`round3_score_${t}`,hasQuotas:!1,cumulativeScore:t})}),e}();if(!(e.length>0))return void m();s=e,o=3,r=0}else if(3===o){if(!(r<s.length-1))return void async function(){try{const e={email:n,finalResults:i.map(e=>({id:e.id,title:e.title,description:e.description,round1Score:e.round1Score||0,round2Score:e.round2Score||0,round3Score:e.round3Score||0,finalScore:e.finalScore||0}))};console.log("Sending final results to server:",e);const t=await fetch(`${c}/submit-final-results`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to submit final results");const o=await t.json();console.log("Server response:",o),m()}catch(e){console.error("Error sending final results to server:",e),alert("Error submitting final results. Please try again.")}}();r++}u(),f(),window.scrollTo(0,0),window.scrollTo({top:0,behavior:"smooth"})}else alert(`Please score all ${l} ideas before proceeding! Currently scored: ${t}/${l}`)}),document.getElementById("emailForm").addEventListener("submit",async function(m){m.preventDefault();const v=document.getElementById("userEmail"),h=document.getElementById("emailError"),p=m.target.querySelector('button[type="submit"]');let y=v.value.trim();if(!y)return h.textContent="Please enter an email address.",void(h.style.display="block");h.style.display="none",p.disabled=!0,p.textContent="Validating...";const g=await async function(e){try{const t=await fetch(`${c}/validate-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});return await t.json()}catch(e){return console.error("Error validating email:",e),{valid:!1,error:"Network error. Please try again."}}}(y);if(g.valid){n=g.email,y=g.email,document.getElementById("emailModal").classList.remove("show"),function(e){const t=document.getElementById("userInfo");document.getElementById("displayEmail").textContent=e,t.style.display="block"}(y);const m=await async function(e){try{const t=await fetch(`${c}/user-status?email=${encodeURIComponent(e)}`);return t.ok?await t.json():{has_voted:!1}}catch(e){return console.error("Error checking user voting status:",e),{has_voted:!1}}}(y);if(m.has_voted)await l();else{const l=await async function(e){try{const t=await fetch(`${c}/user-scores?email=${encodeURIComponent(e)}`);return t.ok&&(await t.json()).scores||[]}catch(e){return console.error("Error loading user scores:",e),[]}}(y);l.length>0&&function(t){t.forEach(t=>{const n=e.find(e=>e.id===t.id);n&&(n.score=t.score)})}(l),await async function(){try{await async function(){const t=n?`${c}/ideas?email=${encodeURIComponent(n)}`:`${c}/ideas`,o=await fetch(t);if(!o.ok)throw new Error("Failed to fetch ideas");const s=await o.json();"already_voted"!==s.status?e=s:await d(s)}(),t=[...e],s=[{round:1,ideas:[...e],groupType:"round1_all",hasQuotas:!0}],o=1,r=0,a=!1,round1Results=[],i=[],u(),f(),window.scrollTo(0,0),window.scrollTo({top:0,behavior:"smooth"})}catch(e){console.error("Error initializing voting:",e),alert("Error loading ideas. Please refresh the page.")}}()}}else h.textContent=g.error||"Invalid email address.",h.style.display="block",p.disabled=!1,p.textContent="Continue"}),async function(){document.getElementById("emailModal").classList.add("show")}()</script><style rel="stylesheet" crossorigin>:root{--color-primary:#0066cc;--color-primary-dark:#004499;--color-secondary:#1e40af;--color-secondary-dark:#1e3a8a;--color-accent:#009639;--color-text-primary:#1a202c;--color-text-secondary:#4a5568;--color-text-heading:#2d3748;--color-text-white:#ffffff;--color-bg-page:#f7fafc;--color-bg-card:#ffffff;--color-bg-round:#edf2f7;--color-bg-container:rgba(255, 255, 255, .98);--color-border:#e2e8f0;--color-border-disabled:#a0aec0;--color-status-voted-bg:#c6f6d5;--color-status-voted-text:#22543d;--color-status-pending-bg:#fef5e7;--color-status-pending-text:#744210;--color-status-winner:#f6ad55;--color-status-winner-dark:#dd6b20;--shadow-light:rgba(0, 0, 0, .04);--shadow-medium:rgba(0, 0, 0, .06);--shadow-heavy:rgba(0, 0, 0, .08);--shadow-extra-heavy:rgba(0, 0, 0, .12);--shadow-primary:rgba(0, 102, 204, .2);--shadow-primary-hover:rgba(0, 102, 204, .3);--shadow-secondary:rgba(30, 64, 175, .2);--shadow-secondary-hover:rgba(30, 64, 175, .3);--gradient-primary:linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));--gradient-secondary:linear-gradient(135deg, var(--color-secondary), var(--color-secondary-dark));--gradient-header:linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 50%, var(--color-accent) 100%)}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;line-height:1.6;color:var(--color-text-primary);background:var(--color-bg-page);min-height:100vh;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.container{max-width:1400px;margin:0 auto;padding:24px}.header{text-align:center;padding:40px 0;position:relative}.user-info{position:absolute;top:20px;left:20px;background:var(--color-bg-card);border:1px solid var(--color-border);border-radius:12px;padding:12px 16px;box-shadow:0 4px 12px var(--shadow-light);z-index:10}.user-email{display:flex;align-items:center;gap:8px;color:var(--color-text-primary);font-size:.9rem;font-weight:500}.user-label{font-size:1.1rem}#displayEmail{color:var(--color-primary);font-weight:600}.header h1{font-size:3.5rem;font-weight:700;background:var(--gradient-header);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:16px;letter-spacing:-.02em}.header p{font-size:1.25rem;color:var(--color-text-secondary);font-weight:400;max-width:600px;margin:0 auto}.main-content{flex:1;min-width:400px}.game-container{background:var(--color-bg-container);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:24px;padding:48px;box-shadow:0 20px 40px var(--shadow-heavy);border:1px solid rgba(255,255,255,.2);margin-bottom:32px}.round-indicator{display:flex;justify-content:center;margin-bottom:48px;gap:8px}.round{padding:12px 24px;border-radius:50px;background:var(--color-bg-round);color:var(--color-text-secondary);font-weight:600;font-size:.95rem;border:2px solid transparent;transition:all .3s cubic-bezier(.4,0,.2,1)}.round.active{background:var(--gradient-secondary);color:var(--color-text-white);box-shadow:0 8px 25px var(--shadow-secondary-hover);transform:scale(1.05)}.section-title{font-size:1.75rem;font-weight:600;color:var(--color-text-heading);margin-bottom:24px;display:flex;align-items:center;gap:12px}.voters-section{margin-bottom:48px}.voters-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:24px;margin-bottom:24px}.voter-card{background:var(--color-bg-card);border-radius:16px;padding:24px;border:1px solid var(--color-border);box-shadow:0 4px 12px var(--shadow-medium);transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.voter-card:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-secondary);transform:scaleX(0);transition:transform .3s ease}.voter-card:hover{transform:translateY(-4px);box-shadow:0 12px 32px var(--shadow-extra-heavy)}.voter-card:hover:before{transform:scaleX(1)}.voter-name{font-weight:600;color:var(--color-text-heading);margin-bottom:16px;text-align:center;font-size:1.1rem}.voter-status{text-align:center;padding:8px 16px;border-radius:20px;font-size:.875rem;font-weight:500;display:inline-block}.voter-status.voted{background:var(--color-status-voted-bg);color:var(--color-status-voted-text)}.voter-status.pending{background:var(--color-status-pending-bg);color:var(--color-status-pending-text)}.ideas-section{margin-bottom:48px}.ideas-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.idea-card{background:var(--color-bg-card);border:1px solid var(--color-border);border-radius:16px;padding:24px;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 8px var(--shadow-light);position:relative;cursor:default;margin-bottom:16px}.score-controls{display:flex;gap:8px;margin-top:16px;justify-content:center}.score-button{width:40px;height:40px;border:2px solid var(--color-border);border-radius:8px;background:var(--color-bg-card);color:var(--color-text-secondary);font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;position:relative}.score-button:hover:not(.disabled){border-color:var(--color-primary);background:#0066cc0d;transform:translateY(-1px)}.score-button.active{background:var(--gradient-primary);border-color:var(--color-primary);color:var(--color-text-white);box-shadow:0 2px 8px var(--shadow-primary)}.score-button.active:hover{background:var(--gradient-primary);border-color:var(--color-primary);opacity:.8;transform:translateY(-1px)}.score-button.disabled{opacity:.3;cursor:not-allowed;background:var(--color-border-disabled);color:var(--color-text-white)}.score-button:not(.active):not(.disabled):hover{border-color:var(--color-secondary);background:#1e40af0d}.idea-title{font-weight:600;color:var(--color-text-heading);margin-bottom:8px;font-size:1.1rem;width:100%;display:block}.idea-description{color:var(--color-text-secondary);font-size:.9rem;margin-bottom:20px;line-height:1.5;width:100%;display:block}.score-status{text-align:center;margin-top:12px;font-size:.875rem;color:var(--color-text-secondary);font-weight:500}.idea-card:hover{transform:translateY(-2px);box-shadow:0 8px 25px var(--shadow-heavy);border-color:var(--color-secondary)}.idea-card.moving{transform:scale(1.02);box-shadow:0 8px 25px var(--shadow-extra-heavy)}.rank-badge{position:absolute;top:16px;left:16px;width:32px;height:32px;background:var(--gradient-secondary);color:var(--color-text-white);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:700;box-shadow:0 2px 8px var(--shadow-secondary-hover);z-index:5}.idea-title{font-weight:600;color:var(--color-text-heading);margin-bottom:8px;font-size:1.1rem;margin-left:0;transition:margin-left .3s ease}.idea-description{color:var(--color-text-secondary);font-size:.9rem;margin-bottom:20px;line-height:1.5;margin-left:0;transition:margin-left .3s ease}.idea-card.scored .idea-description{margin-left:0}.vote-button{background:var(--gradient-primary);color:var(--color-text-white);border:none;padding:10px 20px;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px var(--shadow-primary)}.vote-button:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px var(--shadow-primary-hover)}.vote-button:disabled{background:var(--color-border-disabled);cursor:not-allowed;box-shadow:none;transform:none}.results-section{background:var(--color-bg-container);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:24px;padding:48px;box-shadow:0 20px 40px var(--shadow-heavy);border:1px solid rgba(255,255,255,.2)}.results-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}.result-card{background:var(--color-bg-card);border-radius:16px;padding:24px;border:1px solid var(--color-border);box-shadow:0 2px 8px var(--shadow-light);position:relative;overflow:hidden}.result-card:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary)}.result-card.winner:before{background:linear-gradient(90deg,var(--color-status-winner),var(--color-status-winner-dark))}.result-score{font-size:2rem;font-weight:700;color:var(--color-primary);margin-top:12px}.result-card.winner .result-score{color:var(--color-status-winner)}.controls{text-align:center;margin:48px 0;display:flex;justify-content:center;gap:16px;flex-wrap:wrap}.control-button{background:var(--gradient-primary);color:var(--color-text-white);border:none;padding:16px 32px;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 4px 12px var(--shadow-primary);position:relative;overflow:hidden}.control-button:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.control-button:hover:not(:disabled):before{left:100%}.control-button:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px var(--shadow-primary-hover)}.control-button:disabled{background:var(--color-border-disabled);cursor:not-allowed;box-shadow:none;transform:none}.control-button.secondary{background:var(--color-bg-card);color:var(--color-primary);border:2px solid var(--color-primary)}.control-button.secondary:hover:not(:disabled){background:var(--color-primary);color:var(--color-text-white)}.status-container{background:var(--color-bg-container);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:24px;padding:48px;box-shadow:0 20px 40px var(--shadow-heavy);border:1px solid rgba(255,255,255,.2);margin-bottom:32px}.status-header{text-align:center;margin-bottom:40px}.status-header h2{font-size:2.5rem;font-weight:700;background:var(--gradient-header);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:16px}.status-header p{font-size:1.25rem;color:var(--color-text-secondary);max-width:600px;margin:0 auto}.users-status{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:40px}.user-status-item{background:var(--color-bg-card);border-radius:16px;padding:24px;border:1px solid var(--color-border);box-shadow:0 2px 8px var(--shadow-light);display:flex;align-items:center;justify-content:space-between;transition:all .3s ease;min-height:80px}.user-status-item.completed{border-color:var(--color-accent);background:#0096390d}.user-status-item.waiting{border-color:var(--color-border);background:var(--color-bg-card)}.user-info{display:flex;align-items:center;gap:16px;flex:1;min-width:0}.status-icon{font-size:1.5rem;flex-shrink:0}.user-email{font-weight:600;color:var(--color-text-heading);flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.status-text{font-weight:600;padding:8px 16px;border-radius:20px;font-size:.875rem;flex-shrink:0;white-space:nowrap}.user-status-item.completed .status-text{background:var(--color-accent);color:var(--color-text-white)}.user-status-item.waiting .status-text{background:var(--color-bg-round);color:var(--color-text-secondary)}.status-summary{display:flex;justify-content:center;align-items:center;gap:24px;flex-wrap:wrap;margin-top:20px}.summary-stat{text-align:center;padding:16px 24px;background:var(--color-bg-card);border-radius:12px;border:1px solid var(--color-border);box-shadow:0 2px 8px var(--shadow-light)}.summary-stat .stat-number{font-size:1.8rem;font-weight:700;color:var(--color-primary);margin-bottom:4px}.summary-stat .stat-label{font-size:.9rem;color:var(--color-text-secondary);font-weight:500;text-transform:uppercase;letter-spacing:.05em}.final-results-container{background:var(--color-bg-container);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:24px;padding:48px;box-shadow:0 20px 40px var(--shadow-heavy);border:1px solid rgba(255,255,255,.2);margin-bottom:32px}.results-header{text-align:center;margin-bottom:40px}.results-header h2{font-size:2.5rem;font-weight:700;background:var(--gradient-header);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:16px}.results-header p{font-size:1.25rem;color:var(--color-text-secondary);max-width:600px;margin:0 auto}.final-results-list{display:grid;gap:20px}.final-result-item{background:var(--color-bg-card);border-radius:16px;padding:24px;border:1px solid var(--color-border);box-shadow:0 2px 8px var(--shadow-light);transition:all .3s ease;margin-bottom:16px}.final-result-item:hover{transform:translateY(-2px);box-shadow:0 8px 25px var(--shadow-heavy);border-color:var(--color-accent)}.idea-title{font-weight:600;color:var(--color-text-heading);margin-bottom:8px;font-size:1.1rem}.idea-description{color:var(--color-text-secondary);font-size:.9rem;margin-bottom:12px;line-height:1.5}.final-score{font-size:1.1rem;font-weight:600;color:var(--color-primary)}.progress-container{margin:32px 0}.progress-bar{background:var(--color-border);border-radius:12px;height:8px;margin-bottom:16px;overflow:hidden;position:relative}.progress-fill{background:var(--gradient-secondary);height:100%;width:0%;transition:width .8s cubic-bezier(.4,0,.2,1);border-radius:12px}.stats{display:flex;justify-content:space-around;margin:16px 0;flex-wrap:wrap;gap:16px}.score-distribution{margin:24px 0;padding:20px}.distribution-item{flex-direction:column;align-items:flex-start;gap:8px}.distribution-label{min-width:auto;width:100%}.distribution-bar{width:100%;height:16px}.stat{text-align:center;padding:8px 12px;background:var(--color-bg-card);border-radius:8px;border:1px solid var(--color-border);min-width:80px;box-shadow:0 2px 8px var(--shadow-light)}.stat-number{font-size:1.5rem;font-weight:700;background:var(--gradient-secondary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:2px}.stat-label{color:var(--color-text-secondary);font-size:.75rem;font-weight:500;text-transform:uppercase;letter-spacing:.05em}@media (max-width:1024px){.container{gap:20px;padding:20px}.game-container,.results-section{padding:32px}.users-status{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.user-status-item{padding:20px;min-height:70px}.user-info{gap:12px}.status-icon{font-size:1.3rem}.user-email{font-size:.9rem}.status-text{font-size:.8rem;padding:6px 12px}}@media (max-width:768px){.container{flex-direction:column;padding:16px;gap:24px}.header h1{font-size:2.5rem}.header p{font-size:1.1rem}.game-container,.results-section{padding:24px}.voters-grid{grid-template-columns:1fr}.status-container{padding:24px}.users-status{grid-template-columns:1fr;gap:12px}.user-status-item{padding:16px;min-height:60px;flex-direction:column;align-items:flex-start;gap:12px}.user-info{width:100%}.status-text{align-self:flex-end;font-size:.75rem;padding:4px 8px}.ideas-grid{grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}.controls{flex-direction:column;align-items:center}.control-button{width:100%;max-width:280px}}@media (max-width:480px){.container{padding:12px;gap:16px}.header{margin-bottom:32px;padding:20px 0}.header h1{font-size:2rem}.header p{font-size:1rem}.game-container,.results-section{padding:16px}.control-button{padding:12px 24px;font-size:.9rem}}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes slideInRight{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}@keyframes slideIn{0%{opacity:.8;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fade-in-up{animation:fadeInUp .6s ease-out}.slide-in-right{animation:slideInRight .4s ease-out}.drag-handle{position:absolute;top:16px;right:16px;width:36px;height:36px;background:0 0;border:2px solid var(--color-border-drag);border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:grab;transition:all .2s ease;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;box-shadow:0 2px 6px #00000026;z-index:15;font-size:16px;color:var(--color-text-secondary);font-weight:700;pointer-events:auto}.drag-handle:hover{background:#fffc;border-color:var(--color-border-disabled);transform:scale(1.1);box-shadow:0 4px 12px #0003;cursor:grab}.drag-handle:active{cursor:grabbing;transform:scale(.95)}.drag-handle.dragging{cursor:grabbing}.drag-handle.dragging{background:#6366f1cc;border-color:var(--color-secondary);color:var(--color-text-white);box-shadow:0 6px 16px var(--shadow-secondary-hover);cursor:grabbing!important}.idea-card .drag-handle{display:none}.idea-card.ranked .drag-handle{display:flex}.idea-card{user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.idea-card .idea-description,.idea-card .idea-title{user-select:text;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text}.idea-card.drag-over{border-color:var(--color-secondary);box-shadow:0 4px 12px var(--shadow-secondary)}.drag-clone{box-shadow:0 8px 25px #0000004d!important;transform:rotate(5deg) scale(1.05)!important;transition:none!important}.drag-clone .drag-handle{opacity:0!important}.results-section{margin-top:48px;padding:32px;background:var(--color-bg-card);border-radius:16px;border:1px solid var(--color-border);box-shadow:0 4px 16px var(--shadow-light)}.results-summary{display:flex;justify-content:space-around;margin:32px 0;flex-wrap:wrap;gap:24px}.result-stat{text-align:center;padding:16px;background:var(--color-bg-secondary);border-radius:12px;border:1px solid var(--color-border);min-width:120px;box-shadow:0 2px 8px var(--shadow-light)}.average-scores{margin-top:32px}.average-scores h3{color:var(--color-text-primary);margin-bottom:16px;font-size:1.25rem;font-weight:600}.average-score-item{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;margin-bottom:8px;background:var(--color-bg-secondary);border-radius:8px;border:1px solid var(--color-border)}.average-score-item .idea-title{flex:1;color:var(--color-text-primary);font-weight:500}.average-score-item .average-score{font-weight:700;color:var(--color-primary);background:var(--gradient-secondary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:#00000080;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.modal.show{display:flex;align-items:center;justify-content:center}.modal-content{background:var(--color-bg-card);border-radius:16px;border:1px solid var(--color-border);box-shadow:0 20px 40px var(--shadow-primary);max-width:500px;width:90%;max-height:90vh;overflow-y:auto;animation:modalFadeIn .3s ease-out}.modal-header{padding:32px 32px 24px;text-align:center;border-bottom:1px solid var(--color-border)}.modal-header h2{color:var(--color-text-primary);margin:0 0 8px;font-size:1.5rem;font-weight:600}.modal-header p{color:var(--color-text-secondary);margin:0;font-size:1rem}.modal-body{padding:24px 32px 32px}.form-group{margin-bottom:20px}.form-group label{display:block;color:var(--color-text-primary);font-weight:500;margin-bottom:8px}.form-group input{width:100%;padding:12px 16px;border:2px solid var(--color-border);border-radius:8px;background:var(--color-bg-secondary);color:var(--color-text-primary);font-size:1rem;transition:all .2s ease;box-sizing:border-box}.form-group input:focus{outline:0;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.form-group input:disabled{opacity:.6;cursor:not-allowed}.error-message{color:#ef4444;font-size:.875rem;margin-top:4px;font-weight:500}.modal-actions{display:flex;justify-content:center;gap:12px;margin-top:24px}.modal-button{padding:12px 24px;border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s ease;min-width:120px}.modal-button.primary{background:var(--gradient-primary);color:#fff}.modal-button.primary:hover{transform:translateY(-1px);box-shadow:0 4px 12px var(--shadow-primary)}.modal-button.secondary{background:var(--color-bg-secondary);color:var(--color-text-primary);border:1px solid var(--color-border)}.modal-button:disabled{opacity:.6;cursor:not-allowed;transform:none}@keyframes modalFadeIn{0%{opacity:0;transform:scale(.9) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}@media (max-width:768px){.user-info{position:static;margin-bottom:20px;text-align:center}.header{padding-top:20px}}@media (max-width:480px){.user-email{font-size:.8rem}.user-info{padding:8px 12px}}.idea-card.final-result{background:linear-gradient(135deg,var(--color-bg-card) 0,rgba(0,102,204,.05) 100%);border:2px solid var(--color-primary);position:relative}.final-score{font-size:1.4rem;font-weight:700;color:var(--color-primary);text-align:center;margin-top:16px;padding:16px;background:linear-gradient(135deg,#0066cc1a,#0066cc0d);border-radius:12px;border:2px solid var(--color-primary);box-shadow:0 2px 8px #0066cc26}.final-score small{color:var(--color-text-secondary);font-weight:400;font-size:.9rem}.idea-card.final-result .idea-title{font-weight:600;color:var(--color-text-heading);margin-bottom:8px}.idea-card.final-result .idea-description{color:var(--color-text-secondary);font-size:.9rem;line-height:1.5}.round-info{background:linear-gradient(135deg,#0066cc1a,#0066cc0d);border:2px solid var(--color-primary);border-radius:12px;padding:16px 20px;margin:20px 0;font-weight:600;color:var(--color-primary);text-align:center;font-size:1.1rem;box-shadow:0 2px 8px #0066cc26}.round-info strong{color:var(--color-text-primary);font-size:1.2rem}.tab-navigation{display:flex;border-bottom:2px solid var(--color-border);margin-bottom:24px;background:var(--color-bg-card);border-radius:12px 12px 0 0;overflow:hidden}.tab-button{flex:1;padding:16px 24px;background:0 0;border:none;cursor:pointer;font-size:1rem;font-weight:600;color:var(--color-text-secondary);transition:all .3s ease;border-bottom:3px solid transparent;position:relative}.tab-button:hover{background:#0066cc0d;color:var(--color-primary)}.tab-button.active{color:var(--color-primary);background:#0066cc0d;border-bottom-color:var(--color-primary)}.tab-content{display:none;padding:24px;background:var(--color-bg-card);border-radius:0 0 12px 12px;border:1px solid var(--color-border);border-top:none}.tab-content.active{display:block}.my-scores-content h3{color:var(--color-text-heading);margin-bottom:8px;font-size:1.5rem}.my-scores-content p{color:var(--color-text-secondary);margin-bottom:24px}.personal-scores-list{display:flex;flex-direction:column;gap:16px}.personal-score-item{background:var(--color-bg-round);border-radius:12px;padding:20px;border:1px solid var(--color-border);transition:all .3s ease}.personal-score-item:hover{box-shadow:0 4px 12px var(--shadow-light);transform:translateY(-2px)}.idea-info{margin-bottom:16px}.idea-info .idea-title{font-size:1.2rem;font-weight:600;color:var(--color-text-heading);margin-bottom:4px}.idea-info .idea-description{color:var(--color-text-secondary);font-size:.9rem;line-height:1.4}.score-breakdown{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}.score-detail{display:flex;flex-direction:column;align-items:center;padding:8px 12px;background:var(--color-bg-card);border-radius:8px;border:1px solid var(--color-border)}.score-detail.total{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:var(--color-text-white);border:none;font-weight:600}.score-label{font-size:.8rem;color:var(--color-text-secondary);margin-bottom:4px;text-transform:uppercase;letter-spacing:.5px}.score-detail.total .score-label{color:#ffffffe6}.score-value{font-size:1.5rem;font-weight:700;color:var(--color-text-primary)}.score-detail.total .score-value{color:var(--color-text-white);font-size:1.8rem}@media (max-width:768px){.tab-navigation{flex-direction:column}.tab-button{text-align:center;padding:12px 16px}.score-breakdown{grid-template-columns:1fr 1fr}.personal-score-item{padding:16px}}</style></head><body><div id="emailModal" class="modal"><div class="modal-content"><div class="modal-header"><h2>Welcome to Idea Scoring</h2><p>Please enter your email address to continue</p></div><div class="modal-body"><form id="emailForm"><div class="form-group"><label for="userEmail">Email Address:</label> <input id="userEmail" placeholder="your.email" required><div id="emailError" class="error-message" style="display:none"></div></div><div class="modal-actions"><button type="submit" class="modal-button primary">Continue</button></div></form></div></div></div><div class="container"><div class="main-content"><div class="header"><div class="user-info" id="userInfo" style="display:none"><div class="user-email"><span class="user-label">üë§</span> <span id="displayEmail"></span></div></div><h1>üó≥Ô∏è Multi-Round Idea Scoring</h1><p>Round 1 - Score all ideas (2, 1, or 0). Score 2: max 20% of ideas, Score 1: max 40% of ideas, Score 0: remaining ideas. Click current score to remove, click different score to change.</p></div><div class="game-container"><div class="round-info" id="roundInfo" style="display:none"><strong>Round Information</strong></div><div class="progress-container"><div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div></div><div class="stats"><div class="stat"><div class="stat-number" id="totalIdeas">20</div><div class="stat-label">Total Ideas</div></div></div><div class="ideas-section"><h2 class="section-title">üí° Ideas to Score</h2><div class="ideas-grid" id="ideasGrid"></div></div><div class="controls"><button class="control-button" id="submitVoteBtn" disabled="disabled">Submit Vote</button></div></div><div class="results-section" id="resultsSection" style="display:none"><h2 class="section-title">üìä Voting Results</h2><div class="results-summary"><div class="result-stat"><div class="stat-number" id="totalVotes">0</div><div class="stat-label">Total Votes</div></div><div class="result-stat"><div class="stat-number" id="avgScore2">0</div><div class="stat-label">Score 2 Points</div></div><div class="result-stat"><div class="stat-number" id="avgScore1">0</div><div class="stat-label">Score 1 Points</div></div><div class="result-stat"><div class="stat-number" id="avgScore0">0</div><div class="stat-label">Score 0 Points</div></div></div><div class="average-scores" id="averageScores"><h3>Average Scores by Idea</h3><div id="averageScoresList"></div></div></div></div></div></body></html>